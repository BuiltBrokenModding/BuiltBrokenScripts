//Checks if a project has a property called minecraft.
if (project.hasProperty("minecraft"))
    {
    version = "${project.minecraft.version}-${version_major}.${version_minor}.${version_revis}b" + getBuildNumber()
    }
else 
    (
    version = "${version_major}.${version_minor}.${version_revis}b" + getBuildNumber()
    )
//Adds variable for getting build numbers       
def getBuildNumber() {
    if (System.getenv("BUILD_NUMBER") != null) 
    {
        return "${System.getenv("BUILD_NUMBER")}"
    }
    else if (project.hasProperty("bambooBuildNumber")) 
    {
        return project.bambooBuildNumber
    }
    else if (System.getenv("DRONE_BUILD_NUMBER") != null) 
    {
        return "${System.getenv("DRONE_BUILD_NUMBER")}"
    }
    else if (System.getenv("TRAVIS_BUILD_NUMBER") != null) 
    {
        return "${System.getenv("TRAVIS_BUILD_NUMBER")}"
    }
    else if (project.hasProperty("sbmBuild")
    {
        return project.sbmBuild
    }
    return getDate()
}

println "version = "+ version

def getDate() {
    def date = new Date()
    def formattedDate = date.format('yyyyMMddHHmmss')
    return formattedDate
}

file("${archivebase}.txt").text = version;